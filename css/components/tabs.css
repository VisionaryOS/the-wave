/* ===========================================
   TABS
   CSS-only tabs using the radio button hack
   No JavaScript required - uses :checked selector
   Styled to match hero story cards
   =========================================== */

/* --- Hide radio inputs (visually, not from screen readers) --- */
.tabs__input {
	position: absolute;
	opacity: 0;
	pointer-events: none;
}

/* --- Tab navigation --- */
.tabs__nav {
	display: flex;
	flex-wrap: wrap;
	justify-content: center;
	gap: var(--space-3);
	margin-bottom: var(--space-8);
	padding: 0 var(--gutter);
}

/* --- Tab buttons - styled like mini cards --- */
.tabs__tab {
	padding: var(--space-3) var(--space-8);
	font-family: var(--font-primary);
	font-size: var(--text-lg);
	font-weight: var(--weight-bold);
	color: var(--color-text-muted);
	background: var(--color-surface);
	border-radius: var(--radius-lg);
	border: 2px solid transparent;
	cursor: pointer;
	user-select: none;
	/* Bouncy spring - uses global token */
	transition: 
		transform var(--duration-slow) var(--ease-spring),
		background var(--duration-fast) ease-out,
		color var(--duration-fast) ease-out,
		border-color var(--duration-fast) ease-out,
		box-shadow var(--duration-normal) ease-out;
}

.tabs__tab:hover {
	color: var(--color-text);
	transform: translateY(-4px) scale(1.02);
	box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
}

/* --- Color-coded active states matching topic colors --- */
#tab-security:checked ~ .tabs__nav label[for="tab-security"] {
	background: var(--color-cyan);
	color: var(--color-white);
	border-color: var(--color-cyan);
}

#tab-relationships:checked ~ .tabs__nav label[for="tab-relationships"] {
	background: var(--color-purple);
	color: var(--color-white);
	border-color: var(--color-purple);
}

#tab-careers:checked ~ .tabs__nav label[for="tab-careers"] {
	background: var(--color-orange);
	color: var(--color-white);
	border-color: var(--color-orange);
}

#tab-trust:checked ~ .tabs__nav label[for="tab-trust"] {
	background: var(--color-green);
	color: var(--color-white);
	border-color: var(--color-green);
}

#tab-education:checked ~ .tabs__nav label[for="tab-education"] {
	background: var(--color-blue);
	color: var(--color-white);
	border-color: var(--color-blue);
}

#tab-weird:checked ~ .tabs__nav label[for="tab-weird"] {
	background: var(--color-pink);
	color: var(--color-white);
	border-color: var(--color-pink);
}

#tab-money:checked ~ .tabs__nav label[for="tab-money"] {
	background: var(--color-gold);
	color: var(--color-white);
	border-color: var(--color-gold);
}

/* --- Tab panels container --- */
.tabs__panels {
	display: grid;
	max-width: 1150px;
	margin: 0 auto;
	margin-bottom: var(--space-16);
	padding: 0 var(--gutter);
}

/* --- Individual panels (stacked in same grid cell) --- */
.tabs__panel {
	grid-area: 1 / 1; /* All panels stack in same cell */
	position: relative;
	opacity: 0;
	visibility: hidden;
	pointer-events: none;
	/* Scroll offset for anchor links */
	scroll-margin-top: 6rem;
}

/* Cards inside panels - staggered cascade animation */
.tabs__panel .story-card {
	opacity: 0;
	transform: translateY(24px) scale(0.95);
	/* Bouncy spring - uses global token */
	transition: 
		opacity var(--duration-slow) ease-out,
		transform 0.5s var(--ease-spring-bouncy);
}

/* Stagger delays for cascade effect */
.tabs__panel .story-card:nth-child(1) { transition-delay: 0s; }
.tabs__panel .story-card:nth-child(2) { transition-delay: 0.08s; }
.tabs__panel .story-card:nth-child(3) { transition-delay: 0.16s; }

/* --- Show panel when corresponding radio is checked --- */
#tab-security:checked ~ .tabs__panels .tabs__panel--security,
#tab-relationships:checked ~ .tabs__panels .tabs__panel--relationships,
#tab-careers:checked ~ .tabs__panels .tabs__panel--careers,
#tab-trust:checked ~ .tabs__panels .tabs__panel--trust,
#tab-education:checked ~ .tabs__panels .tabs__panel--education,
#tab-weird:checked ~ .tabs__panels .tabs__panel--weird,
#tab-money:checked ~ .tabs__panels .tabs__panel--money {
	opacity: 1;
	visibility: visible;
	pointer-events: auto;
}

/* --- Also show panel when directly targeted via anchor link --- */
/* :target panel appears on top with higher z-index and solid background */
.tabs__panel:target {
	opacity: 1;
	visibility: visible;
	pointer-events: auto;
	z-index: 10;
}

.tabs__panel:target .story-card {
	opacity: 1;
	transform: translateY(0) scale(1);
}

/* Animate cards when panel is active */
#tab-security:checked ~ .tabs__panels .tabs__panel--security .story-card,
#tab-relationships:checked ~ .tabs__panels .tabs__panel--relationships .story-card,
#tab-careers:checked ~ .tabs__panels .tabs__panel--careers .story-card,
#tab-trust:checked ~ .tabs__panels .tabs__panel--trust .story-card,
#tab-education:checked ~ .tabs__panels .tabs__panel--education .story-card,
#tab-weird:checked ~ .tabs__panels .tabs__panel--weird .story-card,
#tab-money:checked ~ .tabs__panels .tabs__panel--money .story-card {
	opacity: 1;
	transform: translateY(0) scale(1);
}

/* --- Topic box inside tab --- */
.tabs__panel .topic-box {
	border-radius: var(--radius-xl);
	padding: var(--space-8) var(--space-12) var(--space-12);
}

.tabs__panel .topic-box__header {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	text-align: center;
	gap: var(--space-1);
	margin-bottom: var(--space-8);
}

.tabs__panel .topic-box__title {
	font-family: var(--font-primary);
	font-size: var(--text-3xl);
	font-weight: var(--weight-bold);
}

.tabs__panel .topic-box__desc {
	font-family: var(--font-primary);
	font-size: var(--text-xl);
	font-weight: var(--weight-medium);
	opacity: 0.9;
}

.tabs__panel .topic-box__cards {
	display: flex;
	gap: var(--space-5);
	justify-content: center;
}

/* --- Show More Expandable (reserved for future use) ---
   Currently not in use - all 3 cards shown per topic without expansion
   CSS kept minimal for potential future implementation
*/

/* Cards - balanced size */
.tabs__panel .story-card--hero {
	flex: 1 1 280px;
	max-width: 320px;
	height: 380px;
}

/* --- Responsive --- */
@media (max-width: 1000px) {
	.tabs__panel .topic-box__cards {
		flex-wrap: wrap;
	}
	
	.tabs__panel .story-card--hero {
		flex: 1 1 260px;
		max-width: 300px;
	}
}

@media (max-width: 600px) {
	.tabs__nav {
		gap: var(--space-2);
	}
	
	.tabs__tab {
		min-height: 44px; /* WCAG 2.5.5 tap target */
		padding: var(--space-3) var(--space-4);
		font-size: var(--text-base);
	}
	
	.tabs__panel .topic-box {
		padding: var(--space-4);
	}
	
	.tabs__panel .story-card--hero {
		flex: 1 1 100%;
		max-width: 100%;
		height: 320px;
	}
}
